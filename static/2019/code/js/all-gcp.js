function Card(id,data){var card=this;return this.data=data,this.id=id,this.el=$('.card-item[data-id="'+this.id+'"]'),this.size="medium",this.sort=GLOBALS.current_sort,this.infoTemplateSource=$("#info-template").html(),this.coverageTemplateSource=$("#related-coverage-template").html(),this.init=function(){var self=this;this.initEvents(),self.visibleElement(self.el)&&self.setImageToLoad(),card.data.coverage&&card.data.coverage},this.visibleElement=function(element,fullyInView){if($(element).offset()){var pageTop=$(window).scrollTop(),pageBottom=pageTop+$(window).height(),elementTop=$(element).offset().top-1e3,elementBottom=elementTop+$(element).outerHeight()+1e3;return!0===fullyInView?pageTop<elementTop&&pageBottom>elementBottom:elementTop<=pageBottom&&elementBottom>=pageTop}},this.initEvents=function(){var self=this;this.el.on("click.whole",this.toggleWholeCard),this.el.on("click",".toggle-card",this.toggleCard),this.el.find("img").each(function(){$(this).on("load",self.showImage)}),$(window).on("scroll."+card.data.id,this.cardScroll),events.subscribe("filter.update",this.filter),events.subscribe("filter.update",this.cardScroll),events.subscribe("sort.update",this.sortChange),events.subscribe("size.update",this.size),events.subscribe("card.expanded",this.openPlayer)},this.cardScroll=function(){card.visibleElement(card.el)&&($(window).off("scroll"+card.data.id),card.setImageToLoad())},this.setImageToLoad=function(){this.el.find(".image img").each(function(){var src=$(this).data("src");$(this).attr("src")===src&&""!==$(this).attr("src")||$(this).attr("src",src)})},this.showImage=function(){card.el.find("img").addClass("image-loaded")},this.openPlayer=function(obj){obj.id===card.data.filter_id&&(card.el.off("click.whole"),card.el.off("click.gifs"),card.toggleCard())},this.expandedLoadGifs=function(){"large"!==card.size||card.loaded||card.loadGifs()},this.toggleCard=function(e){card.el.toggleClass("expanded-card"),card.el.hasClass("expanded-card")?(events.publish("card.expanded",{id:card.data.player_id}),card.el.off("click.whole"),card.el.off("click.gifs"),card.hideColor()):card.el.on("click.whole",card.toggleWholeCard)},this.toggleWholeCard=function(){"large"===card.size||"medium"===card.size||card.el.hasClass("expanded-card")||(events.publish("card.expanded",{id:card.data.player_id}),card.el.off("click.whole"),card.el.addClass("expanded-card"),card.hideColor())},this.showColor=function(){card.el.hasClass("expanded-card")||!$("body").hasClass("small")&&!$("body").hasClass("medium")||(card.el.find(".info-column").attr("style","color:"+GLOBALS.highlight_color+";"),card.el.find(".info-column .player-description, .info-column span.title, .info-column .stat-wrap").attr("style","border-color:"+GLOBALS.highlight_color+"!important;"))},this.hideColor=function(){card.el.find(".info-column").removeAttr("style"),card.el.find(".info-column .stat-wrap").removeAttr("style"),card.el.find(".info-column .player-description").removeAttr("style"),card.el.find(".info-column span.title").removeAttr("style")},this.showMedia=function(){if(!($(window).width()<768)){var showMedia=$(this).data("media");$('.plus-minus-media[data-id="'+showMedia+'"]').css("background-image");$(this).addClass("color-theme"),$(".player-stat-image").addClass("media-shown"),$('.plus-minus-media[data-id="'+showMedia+'"]').addClass("visible"),$('.plus-minus-media[data-id="'+showMedia+'"] img').attr("src",showMedia)}},this.hideMedia=function(){var hideMedia=$(this).data("media");$(this).removeClass("color-theme"),$(".player-stat-image").removeClass("media-shown"),$('.plus-minus-media[data-id="'+hideMedia+'"]').removeClass("visible")},this.loadGifs=function(){card.loaded||$(window).width()<=767||(card.loaded=!0,_.each(card.el.find(".plus-minus-media"),function(el){var img=$(el).find("img");img.attr("src",img.data("src"))}))},this.sortChange=function(obj){card.sort=obj.sort},this.size=function(obj){card.size=obj.size},this.update=function(new_player){this.data=new_player,this.loaded=!1;var delay=$("body").hasClass("mobile")?1e3:500;classes="",setTimeout(function(){card.el.hasClass("expanded-card")?(classes="card-item col-xs-12 expanded-card "+card.data.player_id+" "+card.data.player_position_stats.type,classes+=new_player.image_hover?" has-hover":"",card.el.attr("class",classes)):(classes="card-item col-xs-12 "+card.data.player_id+" "+card.data.player_position_stats.type,classes+=new_player.image_hover?" has-hover":"",card.el.attr("class",classes)),card.el.find(".offset-id").attr("id",new_player.player_id),card.el.attr("data-player-id",new_player.share_id),new_player.image_data.image_sizes&&(card.el.find(".rank-column img.not-hover").attr("src",new_player.image_data.image_sizes.small).data("src",new_player.image_data.image_sizes.small).attr("alt",card.data.title),card.el.find(".rank-column img.hover-image").length)},500),setTimeout(function(){$(card.el).find(".info-column").html(card.data.info_html),$(card.el).find(".combine-results.non-mobile").html(card.data.combine_html),card.el.find(".movement").removeClass("change-down change-up"),card.el.find(".movement").addClass("change-"+card.data.player_updates.rank_movement),card.el.find(".player-rank-name .rank span").text(card.el.data("id"))},delay)},this.init(),card}function CardList(){var cardlist=this;this.$el=$("#item-list"),this.cards=[],this.teams=[];var currentQuery=location.search.substring(1);return currentQuery=currentQuery?JSON.parse('{"'+decodeURI(currentQuery).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'):{},this.sort_id=currentQuery.list?currentQuery.list:GLOBALS.current_sort,this.filter_id="all",GLOBALS.player=currentQuery.player?currentQuery.player:GLOBALS.player,this.initial_player=!1,this.filterOffsetPos=($(window).width(),$("#sticky-anchor").offset().top),this.introOffsetPos=$("#intro").offset().top,this.trackedCards=[],this.trackedVideos=[],this.size="deep"===currentQuery.view?"large":"skim"===currentQuery.view?"small":"medium",this.filter_id=currentQuery.position?currentQuery.position:"all",this.cards=[],this.init=function(){if("undefined"!=typeof ga?(ga("create","XXX","auto"),ga("send","pageview")):cardlist.adblocker=!0,this.initialLoad=!0,window.location.hash){var hash=window.location.hash.replace(/[^A-Za-z_]/g,"");"teams"===hash?this.showTeams():$("#"+hash)&&$("#"+hash).parents(".card-item").length&&(this.hasPlayer=!0,GLOBALS.player=hash,this.initial_player=hash)}if($("header").addClass("fonts-loaded"),this.initEvents(),this.scrollWatch(),this.initial_player){var initlal=this.initial_player;$(window).width()<768?$('#mobile-nav a[data-filter="'+cardlist.filter_id+'"]').click():$('#filter-bar .filter[data-sort-id="ringer"]').click(),setTimeout(function(){cardlist.openPlayer(),$("html,body").animate({scrollTop:$("#"+initlal).offset().top},function(){$("#item-list").css("opacity",1)})}.bind(this),500)}else $("#item-list").css("opacity",1),$(window).width()<768?($('#mobile-nav a[data-size="'+this.size+'"]').click(),$('#mobile-nav a[data-filter="'+cardlist.filter_id+'"]').click()):$('.person[data-list-id="'+this.sort_id+'"]').click();$(window).width()<768?$('#mobile-nav a[data-size="'+this.size+'"]').click():$('.size-filter a[data-size="'+this.size+'"]').click(),$("body").hasClass("show-teams")?this.initTeams():this.initCards(),this.initOpener(),GLOBALS.isTablet||GLOBALS.isMobile,cardlist.bodyAnimation=!1,$('.filter-position a[data-filter="'+cardlist.filter_id+'"]').click(),setTimeout(function(){cardlist.bodyAnimation=!0},2e3)},this.initTeams=function(){var teamCard,teamCount=0;_.each(GLOBALS.teams,function(team,index){team&&(teamCount++,teamCard=new Team(team.id,team),cardlist.teams.push(teamCard))})},this.initCards=function(){var playerCard,playerCount=0;_.each(GLOBALS.lists[GLOBALS.current_sort],function(player,index){player&&(playerCount++,playerCard=new Card(playerCount,player),cardlist.cards.push(playerCard))})},this.initialSort=function(){var personEl=$('.dropdown .person[data-list-id="'+GLOBALS.current_sort+'"]');personEl&&personEl.length&&(cardlist.personSort(null,personEl),$("#mobile-nav .current-sort").text(personEl.find(".name").text()))},this.trackExpand=function(data){-1!==cardlist.trackedCards.indexOf(data.id)||cardlist.adblocker||(cardlist.trackedCards.push(data.id),ga("send","event","Player Card","expand",data.id))},this.trackVideoPlay=function(title){-1!==cardlist.trackedVideos.indexOf(title)||cardlist.adblocker||(cardlist.trackedVideos.push(title),ga("send","event","Video","play",title))},this.initEvents=function(){$("#filters").on("click",".filter-position a",this.filter),$("#filter-bar").on("click",".teams",this.showTeams),$(".filter.team").on("click",this.showTeams),$("#filter-bar").on("click",".ringer-sort",this.sort),$("#filter-bar").on("click",".danny-sort",this.sort),$("#mobile-nav").on("click",".ringer-sort",this.sort),$("body").hasClass("mobile")?$(".dropdown").on("click",".person",function(e){$(this).parents(".dropdown").hasClass("open")?"default"===$(e.currentTarget).data("list-id")?$(this).parents(".dropdown").removeClass("open"):cardlist.personSort(e):$(this).parents(".dropdown").addClass("open")}):$(".dropdown").on("click",".person",this.personSort),$(".nav-contents").on("click",".person",this.personSort),$(".size-toggle").on("click","a",this.changeSize),$(".video-image").on("click",this.playVideo),$(window).on("scroll.initial",cardlist.initialScroll),$("body").hasClass("mobile")||$(".dropdown").hover(function(){$(this).addClass("open")},function(){$(this).removeClass("open")}),$(window).on("orientationchange",this.orientationChange),GLOBALS.player||$(window).on("scroll",cardlist.scrollWatch)},cardlist.initialScroll=function(){$(window).off("scroll.initial"),cardlist.initInterImages()},this.initOpener=function(){},this.initInterImages=function(){$(".list_inter img").each(function(){$(this).attr("src",$(this).data("src"))}),$(".video-image").each(function(){$(this).css("background-image","url("+$(this).data("background-image")+")")}),$(".more-coverage .img").each(function(){$(this).css("background-image","url("+$(this).data("background-image")+")")})},this.pauseVideo=function(){cardlist.youtubePlayer&&1===cardlist.youtubePlayer.getPlayerState()&&cardlist.youtubePlayer.stopVideo()},this.playVideo=function(){if(window.youtubeReady){var playerCard,videoPlayerId=$(this).data("id");cardlist.current_video_list=cardlist.sort_id,$("body").hasClass("show-teams")?(cardlist.video_list="teams",playerCard=$('#list-teams .video_inter[data-id="'+videoPlayerId+'"]')):(cardlist.video_list="players",playerCard=$('#list-players .video_inter[data-id="'+videoPlayerId+'"]')),cardlist.youtubePlayer&&(cardlist.youtubePlayer.destroy(),$(".video_inter.playing").find(".youtube-wrapper").removeClass("fixed"),$(".video_inter.playing").removeClass("loaded playing"),$(window).off("scroll.youtube"),$(".hidden-stop").off("click.youtube"),$(".close").off("click.youtube"),$(".close").off("click.youtube"));var videoId=$(this).data("video-id"),height=$(window).width()>768?playerCard.outerHeight():playerCard.outerWidth();playerCard.find(".video-title").css("height",playerCard.find(".video-title").outerHeight()),playerCard.find(".video-presentedby").css("width",playerCard.find(".video-presentedby").width());var width=1.50687623*height;playerCard.addClass("playing"),cardlist.trackVideoPlay(playerCard.find(".video-title").text()),$(window).on("scroll.youtube",function(){if(!cardlist.visibleElement(playerCard.find(".video-video"))&&cardlist.noFixedPlayer&&1===cardlist.youtubePlayer.getPlayerState()&&$(".hidden-stop").addClass("playing-hidden"),$(window).scrollTop()<=cardlist.filterOffsetPos&&playerCard.hasClass("playing")?playerCard.addClass("cant-show"):playerCard.removeClass("cant-show"),cardlist.sort_id===cardlist.current_video_list)if(!cardlist.visibleElement(playerCard.find(".video-video"))&&cardlist.noFixedPlayer&&1===cardlist.youtubePlayer.getPlayerState()||$(".hidden-stop").removeClass("playing-hidden"),cardlist.visibleElement(playerCard.find(".video-video"),!1)||playerCard.find(".youtube-wrapper").hasClass("fixed")||cardlist.noFixedPlayer)cardlist.visibleElement(playerCard.find(".video-video"),!1)&&playerCard.find(".youtube-wrapper").hasClass("fixed")&&playerCard.find(".youtube-wrapper").removeClass("fixed").removeAttr("style");else{var offset=$("#amplitude").offset(),styles={left:offset.left,minHeight:$("#amplitude").outerHeight()};playerCard.find(".youtube-wrapper").addClass("fixed"),playerCard.find(".youtube-wrapper").css(styles)}}),$(".hidden-stop").on("click.youtube",function(){cardlist.youtubePlayer.stopVideo(),$(this).removeClass("playing-hidden")}),$(".close").on("click.youtube",".hide",function(){cardlist.noFixedPlayer=!0,playerCard.find(".youtube-wrapper").removeClass("fixed").removeAttr("style"),playerCard.find(".youtube-wrapper .stop-audio").addClass(),$(".hidden-stop").addClass("playing-hidden")}),$(".close").on("click.youtube",".hide-stop",function(){cardlist.noFixedPlayer=!0,playerCard.find(".youtube-wrapper").removeClass("fixed").removeAttr("style"),cardlist.youtubePlayer.stopVideo(),$(".hidden-stop").removeClass("playing-hidden")}),setTimeout(function(){cardlist.youtubePlayer=new YT.Player("youtube-"+cardlist.video_list+"-"+videoPlayerId,{width:width,height:height,videoId:videoId,playerVars:{modestbranding:1,rel:0},events:{onReady:function(event){playerCard.addClass("loaded"),event.target.playVideo()},onStateChange:function(event){0===event.data?(playerCard.find(".youtube-wrapper").removeClass("fixed"),cardlist.youtubePlayer.destroy(),$(playerCard).removeClass("playing loaded"),$(".hidden-stop").removeClass("playing-hidden")):1===event.data&&podcast.pausePodcast()}}})},750)}},this.visibleElement=function(element,fullyInView){var pageTop=$(window).scrollTop(),pageBottom=pageTop+$(window).height(),elementTop=$(element).offset().top,elementBottom=elementTop+$(element).outerHeight();return!0===fullyInView?pageTop<elementTop&&pageBottom>elementBottom:elementTop<=pageBottom&&elementBottom>=pageTop},this.animateHeader=function(){var self=this,visibleId=1,interval=setInterval(function(){visibleId++,$(".heading-opener img.show-img").removeClass("show-img"),$(".heading-opener img[data-frame-id="+visibleId+"]").addClass("show-img"),visibleId===$(".heading-opener img").length&&(visibleId=1,window.clearInterval(interval),setTimeout(function(){self.animateHeader()},500))},300)},this.orientationChange=function(){setTimeout(function(){cardlist.filterOffsetPos=$("#sticky-anchor").offset().top},500)},this.previewSize=function(){cardlist.size_preview=$(this).data("size"),$(".size-indicator").attr("class","size-indicator").addClass(cardlist.size_preview)},this.revertSize=function(){$(".size-indicator").attr("class","size-indicator").addClass(cardlist.size)},this.openPlayer=function(){var timeout=!1,openCard=$('.card-item[data-player-id="'+GLOBALS.player+'"]'),openScrollPos=$("#"+GLOBALS.player).offset().top,delay=$(window).width()<768?500:0;this.hasPlayer?(events.publish("card.expanded",{id:GLOBALS.player}),openCard.addClass("expanded-card"),$(window).on("scroll.scrollWatch",cardlist.scrollWatch),this.scrollWatch()):setTimeout(function(){$("body,html").animate({scrollTop:openScrollPos},function(){$("body").addClass("filter-fixed"),clearTimeout(timeout),timeout=setTimeout(function(){openCard.addClass("expanded-card"),events.publish("card.expanded",{id:GLOBALS.player}),$(window).on("scroll.scrollWatch",cardlist.scrollWatch)},100)})},delay)},this.changeSize=function(e,size){if(e.preventDefault(),!$("body").hasClass("show-teams")&&!$(this).hasClass("disabled")){var transitionClass;cardlist.old_size=cardlist.size,cardlist.size=size||$(this).data("size"),events.publish("size.update",{size:cardlist.size}),transitionClass=cardlist.old_size+"-to-"+cardlist.size,$(".size-indicator").attr("class","size-indicator").addClass(cardlist.size),$(".size-toggle .active").removeClass("active"),$(this).addClass("active"),$("body").removeClass("small medium large").addClass(cardlist.size+" "+transitionClass),cardlist.initialLoad||($(window).width()<767?$("html,body").scrollTop(cardlist.filterOffsetPos+40):cardlist.bodyAnimation&&$("body,html").animate({scrollTop:cardlist.filterOffsetPos+1})),cardlist.initialLoad=!1,setTimeout(function(){$("body").removeClass(transitionClass)},1e3)}},this.scrollWatch=function(){var scrollPos=$(window).scrollTop();cardlist.filterOffsetPos=$("#sticky-anchor").offset().top,scrollPos>cardlist.filterOffsetPos&&!cardlist.hasClass?(cardlist.hasClass=!0,$("body").addClass("filter-fixed"),window.podcast||(window.podcast=new PodcastPlayer(window.masterList)),$("#sticky-phantom").show()):scrollPos<=cardlist.filterOffsetPos&&cardlist.hasClass&&(cardlist.hasClass=!1,$("body").removeClass("filter-fixed"),$("#sticky-phantom").hide())},this.showTeams=function(){if(!$(this).hasClass("disabled")){var teams=$("<textarea />").html(GLOBALS.teamsHTML).text();if($("#list-players").after(teams),cardlist.initInterImages(),cardlist.teams.length||cardlist.initTeams(),cardlist.sort_id="team",$("#mobile-nav").removeClass("open"),$(".active_filter").removeClass("active_filter"),$("body").addClass("show-teams"),$(".filter.teams, .filter.team").addClass("active_filter"),$("body").removeClass("kevin danny jonathan az"),$('.dropdown .person[data-list-id="default"]').show(),$('.dropdown .person[data-list-id="default"]').prependTo(".dropdown .ranking_list"),$("#mobile-nav .current-sort").text("Team Needs by Robert Mays"),$(window).width()<767)$("html,body").scrollTop($("#sticky-anchor").offset().top+40);else{var position=$("#sticky-phantom").offset().top;position||(position=$("#main-content").offset().top-$("#filter-bar-wrapper").height()),$("body,html").animate({scrollTop:position+(parseInt($("#main-content").css("marginTop"),10)/2+5)})}}},this.personSort=function(e,initial){if(!$(".dropdown").hasClass("open"))return void $(".dropdown").addClass("open");$("body").hasClass("show-teams")&&setTimeout(cardlist.initCards,500),$("body").addClass("personSorting");var personEl=initial||$(e.currentTarget);$("body").removeClass("show-teams"),$(".active_filter").removeClass("active_filter"),cardlist.youtubePlayer&&1===cardlist.youtubePlayer.getPlayerState()&&$(".video_inter.playing").addClass("fixed"),personEl.parents(".dropdown").length?(personEl.prependTo(".dropdown .ranking_list"),$(".dropdown").removeClass("open"),$(".dropdown").addClass("active_filter")):$("#mobile-nav").removeClass("open"),personEl.addClass("active_filter"),$("body").addClass("rebuilding"),cardlist.sort_id=personEl.data("list-id"),cardlist.buildList(GLOBALS.data.players),events.publish("sort.update",{sort:cardlist.sort_id}),$('.dropdown .person[data-list-id="default"]').hide()},this.sort=function(e){if(e.preventDefault(),e.stopPropagation(),$("body").hasClass("show-teams")&&setTimeout(cardlist.initCards,500),$("body").removeClass("show-teams"),cardlist.sort_id!=$(e.currentTarget).data("sort-id")){$("body").removeClass("personSorting"),cardlist.youtubePlayer&&1===cardlist.youtubePlayer.getPlayerState()&&$(".video_inter.playing").addClass("fixed"),$("body").removeClass("kevin danny jonathan az"),$(e.currentTarget).parents("#filter-bar-wrapper").length?($('.dropdown .person[data-list-id="default"]').show(),$('.dropdown .person[data-list-id="default"]').prependTo(".dropdown .ranking_list")):($("#mobile-nav").removeClass("open"),$("#mobile-nav .current-sort").text($(e.currentTarget).find(".name").text()));"mock"===$(this).data("sort-id")?$("body").addClass("mock-draft"):$("body").removeClass("mock-draft"),$("body").addClass("rebuilding"),$(".active_filter").removeClass("active_filter"),$(e.currentTarget).addClass("active_filter"),cardlist.sort_id=$(e.currentTarget).data("sort-id"),cardlist.buildList(GLOBALS.data.players),events.publish("sort.update",{sort:cardlist.sort_id}),"mock"===cardlist.sort_id?$(".card-item").each(function(index){index>31&&$(this).hide()}):$(".card-item").show(),"rb"!==cardlist.filter_id||$(".card-item."+cardlist.filter_id+":visible").length?($(".credits").show(),$(".no-players").hide()):$(".no-players").show()}},this.filter=function(e,mobile){$("body").hasClass("show-teams")||(cardlist.filter_id=$(e.currentTarget).data("filter"),"rb"!==cardlist.filter_id||$(".card-item."+cardlist.filter_id+":visible").length?($(".credits").show(),$(".no-players").hide()):$(".no-players").show(),"rb"===cardlist.filter_id&&$(".card-item."+cardlist.filter_id).length?$(".credits").show():cardlist.initInterImages(),mobile||$(".filter-links .pointer").css({top:$(e.currentTarget).position().top-2}),$("#filters .filter-position a.active, #mobile-nav .filter-links a").removeClass("active"),$(e.currentTarget).addClass("active"),$(window).scrollTop()>cardlist.filterOffsetPos&&($(window).width()<767&&!cardlist.initial_player?$("html,body").scrollTop(cardlist.filterOffsetPos):cardlist.bodyAnimation&&$("body,html").animate({scrollTop:cardlist.filterOffsetPos+1}),cardlist.initial_player=!1),"all"===cardlist.filter_id?cardlist.$el.removeClass("filtered qb rb pc ol de idl lb db all-offense all-defense"):(cardlist.$el.removeClass("qb rb pc ol de idl lb db all-offense all-defense"),cardlist.$el.addClass("filtered "+cardlist.filter_id)),cardlist.$el[0].querySelectorAll(".m-ad").forEach(function(s){s.style.display="none"}),setTimeout(function(){ChorusAds.reinsertSlots(cardlist.$el[0])},500))},this.buildList=function(){var playerCount=0;$(window).width()<767?$("html,body").scrollTop(cardlist.filterOffsetPos+10):$("html,body").animate({scrollTop:cardlist.filterOffsetPos+(parseInt($("#main-content").css("marginTop"),10)/2+5)}),cardlist.sort_id="ringer"!==cardlist.sort_id?"mock":"ringer",_.each(GLOBALS.lists[cardlist.sort_id],function(player,index){player&&cardlist.cards[index]&&(playerCount++,cardlist.cards[index].update(player))}),setTimeout(function(){$("body").removeClass("rebuilding")},1e3)},this.init(),cardlist}function Mobile(list){var mobile=this;return mobile.list=list,mobile.filterOffsetPos=$("#content").offset().top,mobile.size="medium",mobile.init=function(){mobile.initEvents()},mobile.initEvents=function(){$("#mobile-nav").on("click",".toggle-zone",mobile.toggleMobileNav),$("#mobile-nav").on("click",".toggle-close",mobile.toggleMobileNav),$("#mobile-nav").on("click",".person",mobile.mobileSort),$("#mobile-nav").on("click",".filter-position a",mobile.mobileFilter),$("#mobile-nav .nav-actions").on("click",".size-toggle a",mobile.mobileChangeSize),$(window).on("orientationchange",mobile.orientationChange)},this.toggleMobileNav=function(){window.clearTimeout(mobile.navTimeout),$(window).scrollTop()<mobile.filterOffsetPos&&!$("#mobile-nav").hasClass("open")&&$("body,html").scrollTop(mobile.filterOffsetPos+1),$("#mobile-nav").toggleClass("open")},this.mobileRingerSort=function(e){$("#mobile-nav .active_filter").removeClass("active_filter"),$(e.currentTarget).addClass("active_filter")},this.mobileChangeSize=function(e){e.preventDefault();$(this).data("size");$("#mobile-nav").removeClass("open"),mobile.old_size=mobile.size,mobile.size=$(this).data("size"),events.publish("size.update",{size:mobile.size}),transitionClass=mobile.old_size+"-to-"+mobile.size,$(".size-indicator").attr("class","size-indicator").addClass(mobile.size),$("#mobile-nav .size-toggle .active").removeClass("active background-theme"),$('#mobile-nav .size-toggle li[data-size="'+mobile.size+'"]').addClass("active background-theme"),$("#mobile-nav .size-toggle a").removeClass("active"),$(e.currentTarget).addClass("active"),setTimeout(function(){$("body").removeClass("small medium large").addClass(mobile.size+" "+transitionClass)},100)},mobile.mobileSort=function(e){e.preventDefault(),$("#mobile-nav").removeClass("open"),setTimeout(function(){$("#mobile-nav .current-sort").text($(e.currentTarget).find(".name").text()),$("#mobile-nav .sort li").removeClass("active_filter color-theme"),$(e.currentTarget).addClass("active_filter color-theme"),mobile.list.sort(e)},100)},mobile.mobileFilter=function(e){e.preventDefault(),$(".filter-links .pointer").css("top",$(e.currentTarget)[0].offsetTop-2),$("#mobile-nav").removeClass("open"),setTimeout(function(){mobile.list.filter(e,!0)},100)},mobile.init(),mobile}function PodcastPlayer(cardlist){var player=this;this.init=function(){this.initEvents(),this.parseFeed("https://feeds.feedburner.com/ringernbashow"),this.playedPodcasts=[]},this.initEvents=function(){$("#amplitude").on("click",".toggle-click",this.togglePodcast),$("#amplitude").on("click",".more-podcasts-toggle",this.toggleMorePodcasts),$("#amplitude").on("click",".more-podcasts li",this.playNewPodcast),$(".amplitude-play-pause").on("click",".play",this.trackListen)},this.initPodcast=function(podcast){Amplitude.init({songs:[{name:this.podcast.title,artist:this.podcast.podcastTitle,url:this.podcast.url,cover_art_url:this.podcast.image}],callbacks:{before_play:function(){cardlist.pauseVideo()}}}),document.getElementById("song-played-progress").addEventListener("click",function(e){var offset=this.getBoundingClientRect(),x=e.pageX-offset.left;Amplitude.setSongPlayedPercentage(parseFloat(x)/parseFloat(this.offsetWidth)*100)})},this.parseFeed=function(url){this.podcastItems=[];new RSSParser;$.ajax({url:"https://cors-anywhere.herokuapp.com/https://rss.art19.com/the-ringer-nfl-show",method:"GET",dataType:"XML",headers:{"x-requested-with":"xhr"}}).done(function(response){console.log("CORS anywhere response",response["#document"])}).fail(function(jqXHR,textStatus){console.log(jqXHR),console.log(textStatus)})},this.XML2jsobj=function(node){function Add(name,value){data[name]?(data[name].constructor!=Array&&(data[name]=[data[name]]),data[name][data[name].length]=value):data[name]=value}var c,cn,data={};for(c=0;cn=node.attributes[c];c++)Add(cn.name,cn.value);for(c=0;cn=node.childNodes[c];c++)1==cn.nodeType&&(1==cn.childNodes.length&&3==cn.firstChild.nodeType?Add(cn.nodeName,cn.firstChild.nodeValue):Add(cn.nodeName,XML2jsobj(cn)));return data},this.trackListen=function(){-1===player.playedPodcasts.indexOf(player.podcast.title)&&(player.playedPodcasts.push(player.podcast.title),ga("send","event","Podcast","play",player.podcast.title))},this.pausePodcast=function(){Amplitude.pause(),$(".amplitude-playing").removeClass("amplitude-playing")},this.toggleMorePodcasts=function(){$("#amplitude").toggleClass("open")},this.buildPodcast=function(podcast){this.podcast={url:podcast.url,title:podcast.title,image:podcast.image,podcastTitle:podcast.podcastTitle},this.initPodcast(),this.buildMorePodcasts()},this.buildMorePodcasts=function(){var self=this,podcastMarkup="";$.each(self.podcastItems,function(index,podcast){podcast.title!==self.podcast.title&&(podcastMarkup+="<li data-index="+index+'><button><span class="artist">'+podcast.podcastTitle+'</span><span class="episode">'+podcast.title+"</span></button></li>")}),$(".more-podcasts ul").html(podcastMarkup)},this.togglePodcast=function(){$("body").toggleClass("podcast-open")},this.playNewPodcast=function(e){var podcast=player.podcastItems[$(e.currentTarget).data("index")];$(e.currentTarget).addClass("active"),player.toggleMorePodcasts(),player.podcast=podcast,Amplitude.playNow({name:podcast.title,artist:podcast.podcastTitle,url:podcast.url,cover_art_url:podcast.image}),player.trackListen(),setTimeout(function(){player.buildMorePodcasts(),$(".more-podcasts").scrollTop(0)},500)},player.init()}function Team(id,data){var team=this;return this.id=id,this.data=data,this.el=$('.team-card[data-id="'+this.data.id+'"]'),this.init=function(){var self=this;this.initEvents(),self.visibleElement(self.el)&&self.setImageToLoad()},this.visibleElement=function(element,fullyInView){if($(element).offset()){var pageTop=$(window).scrollTop(),pageBottom=pageTop+$(window).height(),elementTop=$(element).offset().top-1e3,elementBottom=elementTop+$(element).outerHeight()+1e3;return!0===fullyInView?pageTop<elementTop&&pageBottom>elementBottom:elementTop<=pageBottom&&elementBottom>=pageTop}},this.initEvents=function(){var self=this;setTimeout(function(){$(window).on("scroll.team"+team.id,self.checkVisible),self.checkVisible()},600)},this.checkVisible=function(){team.visibleElement(team.el)&&team.setImageToLoad()},this.setImageToLoad=function(){team.loadImages||(team.loadImages=!0,$(window).off("scroll.team"+team.id),this.el.find("img").each(function(){var src=$(this).data("src");$(this).attr("src")==src&&""!==$(this).attr("src")||$(this).attr("src",src)}))},this.showImage=function(){team.el.find("img").addClass("image-loaded")},this.init(),team}function VideoPlayer(id,data){var video=this;return this.init=function(){this.initEvents()},this.initEvents=function(){},video.init(),video}window.events=function(){var topics={},hOP=topics.hasOwnProperty;return{subscribe:function(topic,listener){hOP.call(topics,topic)||(topics[topic]=[]);var index=topics[topic].push(listener)-1;return{remove:function(){delete topics[topic][index]}}},publish:function(topic,info){hOP.call(topics,topic)&&topics[topic].forEach(function(item){item(void 0!=info?info:{})})}}}(),$(document).ready(function(){window.masterList=new CardList;new Mobile(masterList),new VideoPlayer(masterList)}),function(){for(var method,noop=function(){},methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,console=window.console=window.console||{};length--;)method=methods[length],console[method]||(console[method]=noop)}();var events=function(){var topics={},hOP=topics.hasOwnProperty;return{subscribe:function(topic,listener){hOP.call(topics,topic)||(topics[topic]=[]);var index=topics[topic].push(listener)-1;return{remove:function(){delete topics[topic][index]}}},publish:function(topic,info){hOP.call(topics,topic)&&topics[topic].forEach(function(item){item(void 0!=info?info:{})})}}}();